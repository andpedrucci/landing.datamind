<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>PCB Procedural Ajustado</title>
<style>
  :root{
    --min-dur: 20s;
    --max-dur: 40s;
  }
  html,body{
    margin:0;
    background:#0a0f0d;
    overflow:hidden;
    height:100%;
  }
  svg#pcb{
    width:100vw;
    height:100vh;
    display:block;
  }

  .trace{
    stroke:#1ec9b8;
    fill:none;
    stroke-linecap:round;
    stroke-linejoin:round;
    filter:drop-shadow(0 0 6px rgba(30,201,184,.75));
  }
  .trace.animated{
    stroke-dasharray: var(--len);
    stroke-dashoffset: var(--len);
    animation: grow var(--dur, 24s) linear var(--delay, 0s) infinite;
  }
  @keyframes grow{
    0%   { stroke-dashoffset: var(--len); opacity:.0; }
    10%  { opacity:1; }
    60%  { stroke-dashoffset: 0; opacity:1; }
    100% { stroke-dashoffset: 0; opacity:0; }
  }

  .pad{
    fill:#0a0f0d;
    stroke:#1ec9b8;
    stroke-width:2;
    filter:drop-shadow(0 0 6px rgba(30,201,184,.9));
  }
  .chip{
    fill:none;
    stroke:#1ec9b8;
    filter:drop-shadow(0 0 6px rgba(30,201,184,.85));
  }
</style>
</head>
<body>
  <svg id="pcb"></svg>

<script>
(() => {
  // ======= PARÂMETROS =======
  const NUM_TRACES        = 200;   // menos trilhas
  const FRACTION_ANIMATED = 0.5;   // metade animada
  const NUM_PADS          = 80;
  const NUM_CHIPS         = 15;

  const STEP              = 50;    // maior = “quadrados” maiores
  const MIN_SEGMENTS      = 20;
  const MAX_SEGMENTS      = 45;

  const DIRS = [[1,0],[-1,0],[0,1],[0,-1]]; // só 90°

  const rnd = (min, max) => Math.random()*(max-min)+min;
  const rndi = (min, max) => Math.floor(rnd(min, max+1));
  const choice = arr => arr[Math.floor(Math.random()*arr.length)];

  const clamp = (x, min, max)=> x<min?min: x>max?max: x;

  const svg = document.getElementById('pcb');
  const W = window.innerWidth;
  const H = window.innerHeight;
  svg.setAttribute('viewBox', `0 0 ${W} ${H}`);

  function buildPath(startX, startY, segments){
    let x = Math.floor(startX/STEP)*STEP;
    let y = Math.floor(startY/STEP)*STEP;
    let d = `M${x} ${y}`;
    for (let i=0; i<segments; i++){
      let dir = choice(DIRS);
      x += dir[0]*STEP;
      y += dir[1]*STEP;
      x = clamp(x,0,W);
      y = clamp(y,0,H);
      d += ` L${x} ${y}`;
    }
    return d;
  }

  function addPath(d, animated){
    const p = document.createElementNS('http://www.w3.org/2000/svg','path');
    p.setAttribute('d', d);
    p.setAttribute('class','trace');
    p.style.strokeWidth = Math.random()<.3 ? 3 : 1.5;
    svg.appendChild(p);

    const len = p.getTotalLength();
    if(animated){
      const dur = rnd(20,40).toFixed(2)+'s';
      const delay = rnd(0,20).toFixed(2)+'s';
      p.style.setProperty('--len', len);
      p.style.setProperty('--dur', dur);
      p.style.setProperty('--delay', delay);
      p.classList.add('animated');
    }else{
      p.style.strokeDasharray = len;
      p.style.strokeDashoffset = 0;
    }
  }

  for(let i=0;i<NUM_TRACES;i++){
    const d = buildPath(Math.random()*W, Math.random()*H, rndi(MIN_SEGMENTS,MAX_SEGMENTS));
    addPath(d, Math.random()<FRACTION_ANIMATED);
  }

  for(let i=0;i<NUM_PADS;i++){
    const cx = Math.floor(Math.random()*W/STEP)*STEP;
    const cy = Math.floor(Math.random()*H/STEP)*STEP;
    const pad = document.createElementNS('http://www.w3.org/2000/svg','circle');
    pad.setAttribute('cx', cx);
    pad.setAttribute('cy', cy);
    pad.setAttribute('r', Math.random()<.2 ? 6 : 4);
    pad.setAttribute('class','pad');
    svg.appendChild(pad);
  }

  for(let i=0;i<NUM_CHIPS;i++){
    const x = Math.random()*(W-100);
    const y = Math.random()*(H-100);
    const chip = document.createElementNS('http://www.w3.org/2000/svg','rect');
    chip.setAttribute('x', x);
    chip.setAttribute('y', y);
    chip.setAttribute('width', 40+Math.random()*100);
    chip.setAttribute('height',40+Math.random()*100);
    chip.setAttribute('class','chip');
    svg.appendChild(chip);
  }
})();
</script>
</body>
</html>
